<?php

namespace App\Commands;

use Centum\Console\Application;
use Centum\Interfaces\Console\CommandBuilderInterface;
use Centum\Interfaces\Container\ContainerInterface;
use Throwable;

////////////////////////////////////////////////////////////////////////////////
//                                  CONSOLE                                   //
////////////////////////////////////////////////////////////////////////////////

/**
 * @psalm-suppress UnnecessaryVarAnnotation
 * @var ContainerInterface $container
 */
$commandBuilder = $container->get(CommandBuilderInterface::class);

$console = new Application($container, $commandBuilder);



////////////////////////////////////////////////////////////////////////////////
//                                  COMMANDS                                  //
////////////////////////////////////////////////////////////////////////////////

$console->addCommand(MainCommand::class);



////////////////////////////////////////////////////////////////////////////////
//                             EXCEPTION HANDLERS                             //
////////////////////////////////////////////////////////////////////////////////

$console->addExceptionHandler(
    Throwable::class,
    ErrorCommand::class
);



////////////////////////////////////////////////////////////////////////////////
//                                 AND RETURN                                 //
////////////////////////////////////////////////////////////////////////////////

return $console;
